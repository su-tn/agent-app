<div class="col-lg-12">
    <div class="col-md-8">
        <h3>Edit Your User Profile</h3>
        <br />
        <div class="error"></div>
        <form rel="form" method="POST" id="dash_profile_form" class="form-horizontal">
            <div class="form-group">
                <label class="col-sm-4">First Name</label>
                <div class="col-sm-8">
                    <span class="hidden-text"><%= user.get('firstName') || '' %></span>
                    <i class="fa fa-pencil"></i>
                    <input type="text" class="hidden-input" id="first-name" name="firstName" value="<%= user.get('firstName') || '' %>">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-4">Last Name</label>
                <div class="col-sm-8">
                
                    <span class="hidden-text"><%= user.get('lastName') || '' %></span>
                    <i class="fa fa-pencil"></i>
                    <input type="text" class="hidden-input" id="last-name" name="lastName" value="<%= user.get('lastName') || '' %>">
                </div>
            </div>
            <% if(user.get('userType') == 3){ %>
            <div class="form-group">
                <label class="col-sm-4">Agent ID Number</label>
                <div class="col-sm-8">
                    <span class="hidden-text"><%= user.get('agentId') || '' %></span>
                    <i class="fa fa-pencil"></i>
                    <input type="text" class="hidden-input" id="agent-id" name="agentId" value="<%= user.get('agentId') || '' %>">
                </div>
            </div>
            <% } %>
            <div class="form-group">
                <label class="col-sm-4">Change Password</label>
                <div class="col-sm-8">
                    <input type="password" id="password" class="form-control" name="password"/>
                </div>
            </div>
            <div class="form-group align-center">
                <a class="btn standard-nocolor-button" onclick="clearForm('#dash_profile_form')">Clear form</a>
                <button type="button" onclick="updateProfile()" class="btn btn-default standard-button">Next</button>
            </div>
        </form>
    </div>
</div>

<script>
    $(function(){
        $('.fa-pencil').click(function () {
            $(this).toggle();
            $(this).next().css('visibility', 'visible').focus();
            $(this).prev().toggle();
        })
        
        $('.hidden-input').blur(function () {
            $(this).css('visibility', 'hidden');
            $(this).parent().find('.hidden-text').toggle();
            $(this).prev().toggle();
            if ($(this).val() != "" && $(this).val() != null) {
                $(this).parent().find('.hidden-text').text($(this).val());
            } else {
                $(this).val($(this).parent().find('.hidden-text').text());
            }
        })
    })
</script>